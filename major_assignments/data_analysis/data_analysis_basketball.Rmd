---
title: "data_analysis_basketball"
output: html_document
date: "2024-04-23"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(dplyr)
library(janitor)
library(lubridate)
library(tidyverse)
```
```{r}
roster_23_24 <- read_csv("data/wbb_rosters_2023_24.csv")
roster_22_23 <- read_csv("data/wbb_rosters_2022_23.csv")
roster_21_22 <- read_csv("data/wbb_rosters_2021_22.csv")
roster_20_21 <- read_csv("data/wbb_rosters_2020_21.csv")
```
```{r}
#Appending rosters for all four seasons 
all_rosters <- bind_rows(roster_20_21, roster_21_22, roster_22_23, roster_23_24)

```

```{r}
#Changing column types to character as needed

all_rosters <- all_rosters |>
mutate(
  ncaa_id = as.character(ncaa_id), 
  player_id = as.character(player_id)
)
```

Deliverable 2:

Data limitations
- The four rosters are inconsistent in the number of columns they have — we think this probably won't matter, because all the columns that we specifically are working with are present in all the datasets, but that is something to consider limitation-wise
- For some players who are graduate students, the data lists their former (undergraduate) college under the high school column. This is just a quirk of how the data is recorded, and won't really impact us — because it's such a rare case, these colleges will likely show up at the bottom of the list when we're analyzing what high schools produced the most players, and thus won't factor into our most important results. But it's something to keep an eye out for.
-Some players here and there are missing certain pieces of information. Most instances make sense — for instance, high school is mostly not listed for international players. Other pieces of information like primary position are also missing, but those shouldn't impact our analysis because we're not looking at those columns. But there are also some players that are missing more important recorded information like heights — when analyzing height in question 5, how should we go about this? We could just drop those players from the analysis and note that we did that in a written explanation in our document. 


Timeframe
-Timeframe should be fine -- for most of the questions we're investigating, we're going to only use the 2023-24 dataset, and for one question that requires comparison across years, we have those datasets present. We'll just specify in our project that we used the timeframe of data available to us, which encompasses the 2020-2024 seasons. 
-Some data is slightly outdated. For instance, the PAC-12 conference listed in some of the rosters does not exist anymore. But since we're not analyzing anything by conference, this should also be fine

Missing definitions/context
- Things we need definitions/data dictionary for: count, redshirt (see bullet below for specifics)
-For the redshirt column, it would be good to get clarification on how that was documented in the data. Did the players marked as having redshirted redshirt in the season that the dataset represents, or does that just indicate that they redshirted at any point in their personal college career?

What we did to make data better-defined
- Appended rosters across all four years into a single dataset. This will make it easier to see comparisons of international players across years to help us answer question 3
- Changed column types as needed to convert things to characters (e.g. player ID) that were registering as numbers but actually are not

```{r}
#Basic analysis to show number of rows and columns in each dataset
roster_20_21

roster_21_22

roster_22_23

roster_23_24

```


Basic exploratory analysis shows that...
- 2020-21 roster has 29 columns and 13075 rows (players)
- 2021-22 roster has 26 columns and 13645 rows (players)
- 2022-23 roster has 29 columns and 13805 rows (players)
- 2023-24 roster has 31 columns and 13907 rows (players)
- When all the rosters are combined, the appended dataset shows that there have been 54,432 players across the past four seasons


1. What states produced the most NCAA recruits for the 2023-2024 season? 
```{r}

```


2. What schools produced the most NCAA recruits for the 2023-24 season? Are they mostly public or private?
```{r}

```


3. Are there changes between school years in terms of how many student athletes outside of the U.S. are on the NCAA roster? 
```{r}

```


4. What percentage of students on the 2023-24 roster are redshirts, and are players in a certain year more likely to redshirt?
```{r}

```


5. Are there differences in average height between the different divisions? Also, if we’re able to join this with ranking data from the season, is there a correlation between higher/lower average heights at different schools and how well those teams did?
```{r}

```


